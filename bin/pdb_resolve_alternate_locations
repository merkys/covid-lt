#!/usr/bin/env python3

from pdbio import PDBFile
import argparse, sys

parser = argparse.ArgumentParser()
parser.add_argument('files', nargs='*', default=[sys.stdin])
args = parser.parse_args()

pdb = PDBFile(args.files[0]) # Only the first file is processed for now

for chain in pdb:
    for residue in chain:
        primary_location = None
        for atom in residue:
            if atom.alternate_location() == ' ':
                continue
            if not primary_location:
                primary_location = atom.alternate_location()
            if atom.alternate_location() == primary_location:
                atom.alternate_location(' ')
            else:
                atom.delete()

print(pdb, end='')
